:root {
  --default-font: "Roboto",  system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --heading-font: "Montserrat",  sans-serif;
  --nav-font: "Open Sans",  sans-serif;
}

/* Global Colors - The following color variables are used throughout the website. Updating them here will change the color scheme of the entire website */
:root { 
  --background-color: #ffffff; /* Background color for the entire website, including individual sections */
  --default-color: #444444; /* Default color used for the majority of the text content across the entire website */
  --heading-color: #222222; /* Color for headings, subheadings and title throughout the website */
  --accent-color: #03ffce; /* Accent color that represents your brand on the website. It's used for buttons, links, and other elements that need to stand out */
  --surface-color: #ffffff; /* The surface color is used as a background of boxed elements within sections, such as cards, icon boxes, or other elements that require a visual separation from the global background. */
  --contrast-color: #222222; /* Contrast color for text, ensuring readability against backgrounds of accent, heading, or default colors. */
}
:root{
  --button-radius: 5px;
}
/* Nav Menu Colors - The following color variables are used specifically for the navigation menu. They are separate from the global colors to allow for more customization options */
:root {
  --nav-color: #222222;  /* The default color of the main navmenu links */
  --nav-hover-color: #03ffce; /* Applied to main navmenu links when they are hovered over or active */
  --nav-mobile-background-color: #ffffff; /* Used as the background color for mobile navigation menu */
  --nav-dropdown-background-color: #ffffff; /* Used as the background color for dropdown items that appear when hovering over primary navigation items */
  --nav-dropdown-color: #222222; /* Used for navigation links of the dropdown items in the navigation menu. */
  --nav-dropdown-hover-color: #03ffce; /* Similar to --nav-hover-color, this color is applied to dropdown navigation links when they are hovered over. */
}

/* Color Presets - These classes override global colors when applied to any section or element, providing reuse of the sam color scheme. */

.light-background {
  --background-color: #f5f9ff;
  --surface-color: #ffffff;
}

.dark-background {
  --background-color: #060606;
  --default-color: #ffffff;
  --heading-color: #ffffff;
  --surface-color: #252525;
  --contrast-color: #ffffff;
}

/* Smooth scroll */
:root {
  scroll-behavior: smooth;
}

.mark {
  position: absolute;
  background-color: #03ffce;
  overflow: hidden;
}

.preview-settings {
  max-width: 1000px;
  margin: 20px auto;
  padding: 20px;
  background: #fff;
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 0px;
}

.upload-section {
  text-align: center;
}

.upload-section label {
  font-size: 1.2em;
  margin-right: 10px;
}

.upload-section input[type="file"] {
  font-family: var(--heading-font);
  padding: 5px;
}

.controls {
  display: flex;
  justify-content: space-between;
  gap: 20px;
}

.area-size, .positions {
  flex: 1;
  padding: 15px;
}

.area-size h2, .positions h2 {
  font-family: var(--heading-font);
  margin-bottom: 10px;
  color: var(--heading-color);
}

.area-size button, .positions button {
  background: var(--accent-color);
  color: var(--contrast-color);
  font-family: var(--heading-font);
  border: none;
  border-radius: 5px;
  padding: 5px;
  margin: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
}
.positions > div{
  flex: 1;
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}
.area-size button:hover, .positions button:hover {
  background: #0cc29d;
}

.area-size input {
  padding: 8px;
  margin: 5px;
  border: 1px solid #ccc;
  border-radius: var(--button-radius);
  font-family: var(--heading-font);
}

@media screen and (max-width: 768px) {
  .controls {
    flex-direction: column;
  }
}
/* Center the upload control */
.upload-section{
  text-align:center;
}

/* Hide the real input but keep it accessible */
.file-input-visually-hidden{
  position:absolute !important;
  width:1px;height:1px;
  padding:0;margin:-1px;border:0;
  overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;
}

/* Generic button */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  padding:.65rem 1.1rem;
  border-radius: var(--button-radius,6px);
  font: 600 0.95rem/1 var(--heading-font, inherit);
  border:1px solid transparent;
  cursor:pointer; user-select:none;
  text-decoration:none;
  transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
}

/* Accent style that matches your palette */
.btn-accent{
  background: var(--accent-color);
  color: var(--contrast-color);
  box-shadow: 0 4px 14px rgba(0,0,0,.18);
}
.btn-accent:hover,
.btn-accent:focus-visible{
  filter: brightness(0.95);
  box-shadow: 0 6px 20px rgba(0,0,0,.24);
}
.btn-accent:active{ transform: translateY(1px); }

/* Upload button tweaks */
.btn-upload i{ font-size:1.1rem; line-height:0; }

/* Optional: chosen file name */
.file-name{
  display:block;
  margin-top:.5rem;
  font-size:.9rem;
  color: var(--heading-color);
  opacity:.75;
}

/* ===== Xframe: responsive square ===== */
#frame{
  position: relative;
  width: clamp(260px, 92vw, 960px); /* fills small screens, caps on large */
  aspect-ratio: 1 / 1;             /* always a square */
  margin: 0 auto 28px;
  border-radius: 12px;
  background: #0f1012;
  overflow: hidden;
  box-shadow: 0 12px 34px rgba(0,0,0,.35);
}

/* Grid that fills the square */
#frame .grid{
  display: grid;
  grid-template-columns: repeat(var(--cols, 100), 1fr);
  gap: 0;
  width: 100%;
  height: 100%;
}

/* Each cell is square, so the whole grid tiles perfectly */
#frame .pixel{
  aspect-ratio: 1 / 1;
  background: #68696b;
  border: 1px solid rgba(255,255,255,.035);
}

/* Selection overlay scales with the grid using percentages */
#frame .selection{
  position: absolute;
  left: 0; top: 0; width: 0; height: 0;
  border: 2px dashed var(--accent-color);
  border-radius: 6px;
  box-shadow: inset 0 0 0 9999px rgba(0,0,0,.22);
  transition: left .12s, top .12s, width .12s, height .12s;
  pointer-events: none;
}
#frame .selection .preview{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; border-radius: 4px;
}
/* ======== Sector boundaries & locks ======== */

/* Put grid below overlays, mark above */
#frame .grid{ position: relative; z-index: 1; }
#frame .mark{ z-index: 3; }

/* Dashed boundary squares (centered) */
#frame .boundary{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  border: 2px dashed rgba(3,255,206,.75); /* uses your accent hue */
  border-radius: 8px;
  pointer-events:none;
  z-index: 2;
}

/* Little corner tags for labels */
#frame .sector-tag{
  position:absolute; top:-14px; left:-2px;
  transform: translateY(-100%);
  background: #0f1012;
  color: var(--accent-color);
  padding: 2px 6px;
  font: 600 12px/1.1 var(--heading-font);
  border-radius: 6px;
  border: 1px solid rgba(3,255,206,.35);
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
  white-space: nowrap;
}

/* Blur lock overlay for Stage 2 & 3 */
#frame .lock-overlay{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  border-radius: 8px;
  background: rgba(0,0,0,.18);
  /* real blur where supported (iOS/Chrome/Safari) */
  backdrop-filter: blur(3px) saturate(0.8);
  /* fallback if no backdrop-filter */
  -webkit-backdrop-filter: blur(3px) saturate(0.8);
  z-index: 2; /* under the .mark */
  pointer-events:none;
}

/* Optional lock label badge */
#frame .lock-badge{
  position:absolute; right:8px; bottom:8px;
  background: rgba(0,0,0,.55);
  color: #fff;
  font: 600 12px/1.1 var(--heading-font);
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,.15);
  letter-spacing:.2px;
}

/* Helper when we need to highlight illegal placement */
#frame .mark.is-invalid{
  outline: 2px solid #df1529;
  box-shadow: 0 0 0 2px rgba(223,21,41,.35) inset;
}
/* ============ Floating Position Pad ============ */
.position-pad{
  position: fixed;             /* floats over UI; stays put while scrolling */
  inset: auto 12px 12px auto;  /* bottom-right by default */
  z-index: 50;
  width: 240px;
  color: #fff;
  background: linear-gradient(180deg, rgba(20,22,28,.98), rgba(20,22,28,.93));
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  box-shadow: 0 14px 40px rgba(0,0,0,.35);
  user-select: none;
  touch-action: none;          /* makes drag predictable on mobile */
}
@media (max-width: 768px){
  .position-pad{
    left: 50%; right: auto; transform: translateX(-50%); bottom: 12px;
    width: min(92vw, 320px);
  }
}

.position-pad .pad-head{
  display:flex; align-items:center; gap:8px;
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255,255,255,.06);
  cursor: grab;
}
.position-pad .pad-head:active{ cursor: grabbing; }
.position-pad .pad-title{
  font: 700 13px/1 var(--heading-font, system-ui);
  opacity: .9;
}
.position-pad .pad-actions{ margin-left:auto; display:flex; gap:6px; }
.position-pad .pad-actions .btn-ico{
  width:28px;height:28px; display:grid; place-items:center;
  background: transparent; border:1px solid rgba(255,255,255,.12);
  border-radius: 8px; color:#fff; opacity:.9; cursor:pointer;
}
.position-pad .pad-actions .btn-ico:hover{ background: rgba(255,255,255,.06); }

.position-pad.is-collapsed .pad-body{ display:none; }

.position-pad .pad-body{ padding: 10px; }
.position-pad .pad-grid{
  display:grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
}
.position-pad .pad-grid button{
  height: 52px; border-radius: 10px; border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color:#fff; font: 700 18px/1 var(--heading-font, system-ui);
  display:grid; place-items:center; cursor:pointer;
  transition: transform .06s ease, background .2s ease, border-color .2s ease;
  touch-action: manipulation;     /* allow press-hold without scrolling */
}
.position-pad .pad-grid button:active{ transform: translateY(1px); }
.position-pad .pad-grid button:hover{ background: rgba(255,255,255,.1); }

.position-pad .pad-step{
  display:flex; align-items:center; gap:10px; margin-top: 10px;
}
.position-pad .pad-step span{
  font: 700 12px/1 var(--heading-font, system-ui); opacity:.85;
  width: 42px;
}
.position-pad .pad-step input[type="range"]{
  flex:1; accent-color: var(--accent-color);
}
.position-pad .pad-step output{
  font: 700 12px/1 var(--heading-font, system-ui); opacity:.85;
  min-width: 58px; text-align:right;
}

/* Make sure pad never hides #frame on small screens */
#frame{ scroll-margin-bottom: 120px; }

/* (From earlier steps) boundaries / lock / toasts already exist */
